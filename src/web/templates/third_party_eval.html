<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../static/third_party_eval.css">
    <title>Third Party Evaluation</title>
</head>

<!-- JS for maneuvering text -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script>

    questionAnswers = {};

    $(document).ready(function() {
        $("#submit").click(function() {
            human0Val = $('input[type=radio]:checked', '#humanlike0').val();
            correct0Val = $('input[type=radio]:checked', '#correct0').val();
            strategic0Val = $("input[type=radio]:checked", "#strategic0").val();
            fluent0Val = $("input[type=radio]:checked", "#fluent0").val();

            human1Val = $('input[type=radio]:checked', '#humanlike1').val();
            correct1Val = $('input[type=radio]:checked', '#correct1').val();
            strategic1Val = $("input[type=radio]:checked", "#strategic1").val();
            fluent1Val = $("input[type=radio]:checked", "#fluent1").val();


            questionAnswers["humanlike_0"] = human0Val;
            questionAnswers["correct_0"] = correct0Val;
            questionAnswers["strategic_0"] = strategic0Val;
            questionAnswers["fluent_0"] = fluent0Val;

            questionAnswers["humanlike_1"] = human1Val;
            questionAnswers["correct_1"] = correct1Val;
            questionAnswers["strategic_1"] = strategic1Val;
            questionAnswers["fluent_1"] = fluent1Val;

            console.log(questionAnswers);
            $.ajax({
                url: "/submit",
                type: "POST",
                data: JSON.stringify(questionAnswers),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                    //alert("SUCCESS");
                    console.log(JSON.stringify(data));
                    window.location.reload(true);
                },
                failure: function(){
                    console.log("SHIT");
                }
            })

        });
    });


    function formatDialogue(){
        hiddenDialogue = $("#hiddendialogue").text();
        console.log(hiddenDialogue);
        statements = hiddenDialogue.split(";");
        for(var idx = 0; idx < statements.length; idx++){
            utterance = statements[idx];
            colonIdx = utterance.indexOf(":");
            agent = utterance.substring(0, colonIdx+1);
            rest = utterance.substring(colonIdx+1);

            $(".dialogue").append("<p>" + "<strong>" + agent + "</strong>" + rest + "</p>");
        }
    }

    window.onload = function(){
        questionAnswers["name"] = {{ name|safe|tojson}};
    }

</script>


<body >
    <div class="wrapper" >
        <header>
            <h1><b>Instructions</b></h1> <br>
               <span style="text-align:center;"> Below you will be given a dialogue that happened between two agents, <strong>Agent 0</strong> and <strong>Agent 1 </strong>
                   Your task is to answer the questions that follow with regards to the agents in the dialogue presented.</span> <br> <br>

                <ul style="margin-left: 30px;">
                </ul>
        </header>
        <br>
        <br>


        <!-- Fill in a dialogue here -->
        <div class="dialogue">
            {% for idx, turn in dialogue.items() %}
                <p id="{{idx}}"> <strong>Agent {{turn.agent}}:   </strong> {{turn.data}}</p>

            {% endfor %}

        </div>
        <br>

        <!-- Agent 0 questions -->
        <div class="q">
            How human-like is Agent 0? (5 is most human-like and 0 is least human-like)
            <form id="humanlike0">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How factually-correct is Agent 0? (5 is most correct and 0 is least correct)
            <form id="correct0">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How strategic is Agent 0? (5 is most strategic and 0 is least strategic)
            <form id="strategic0">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How fluent is Agent 0? (5 is most fluent and 0 is least fluent)
            <form id="fluent0">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <!-- Agent 1 questions -->
        <div class="q">
            How human-like is Agent 1? (5 is most human-like and 0 is least human-like)
            <form id="humanlike1">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How factually-correct is Agent 1? (5 is most correct and 0 is least correct)
            <form id="correct1">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How strategic is Agent 1? (5 is most strategic and 0 is least strategic)
            <form id="strategic1">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How fluent is Agent 1? (5 is most fluent and 0 is least fluent)
            <form id="fluent1">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <div class="buttons" style="text-align:center;">
         <button type="button" id="submit" >Submit HIT!</button>
        </div>

    </div>


</body>
</html>