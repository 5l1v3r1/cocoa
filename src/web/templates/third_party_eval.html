<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../static/third_party_eval.css">
    <title>Third Party Evaluation</title>
</head>

<!-- JS for maneuvering text -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script>

    //window.onload = formatDialogue;
    questionAnswers = {};

    $(document).ready(function() {
        $("#submit").click(function() {
            human0Val = $('input[type=radio]:checked', '#humanlike0').val();
            effective0Val = $('input[type=radio]:checked', '#effective0').val();
            strategic0Val = $("input[type=radio]:checked", "#strategic0").val();

            console.log("Human " + human0Val);
            console.log("Effect " + effective0Val);
            console.log("Strat " + strategic0Val);

            questionAnswers["humanlike_0"] = human0Val;
            questionAnswers["effective_0"] = effective0Val;
            questionAnswers["strategic_0"] = strategic0Val;

            console.log(questionAnswers);
            $.ajax({
                url: "/submit",
                type: "POST",
                data: JSON.stringify(questionAnswers),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                    //alert("SUCCESS");
                    console.log(JSON.stringify(data));
                    window.location.reload(true);
                },
                failure: function(){
                    console.log("SHIT");
                }
            })

        });
    });


    function formatDialogue(){
        hiddenDialogue = $("#hiddendialogue").text();
        console.log(hiddenDialogue);
        statements = hiddenDialogue.split(";");
        for(var idx = 0; idx < statements.length; idx++){
            utterance = statements[idx];
            colonIdx = utterance.indexOf(":");
            agent = utterance.substring(0, colonIdx+1);
            rest = utterance.substring(colonIdx+1);
            //console.log(agent);
            //console.log(rest);

            $(".dialogue").append("<p>" + "<strong>" + agent + "</strong>" + rest + "</p>");
        }
    }

    window.onload = function(){
        questionAnswers["name"] = {{ name|safe|tojson}};
    }

</script>


<body >
    <div class="wrapper" >
        <header>
            <h1><b>Instructions</b></h1> <br>
               <span style="text-align:center;"> Below you will be given a dialogue that happened between two agents, <strong>Agent 0</strong> and <strong>Agent 1 </strong>
                   Your task is to answer the questions that follow with regards to the agents in the dialogue presented.</span> <br> <br>

                <ul style="margin-left: 30px;">
                </ul>
        </header>
        <br>
        <br>


        <!-- Fill in a dialogue here -->
        <div class="dialogue">
            {% for idx, turn in dialogue.items() %}
                <p id="{{idx}}"> <strong>Agent {{turn.agent}}:   </strong> {{turn.data}}</p>

            {% endfor %}

        </div>
        <br>


        <div class="q">
            How human-like is Agent 0? (5 is most human-like and 0 is least human-like)
            <form id="humanlike0">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How effective is Agent 0? (5 is most effective and 0 is least effective)
            <form id="effective0">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="q">
            How strategic is Agent 0? (5 is most strategic and 0 is least strategic)
            <form id="strategic0">
            <input type="radio" name="answer" value="1"> 1<br>
            <input type="radio" name="answer" value="2"> 2<br>
            <input type="radio" name="answer" value="3"> 3 <br>
            <input type="radio" name="answer" value="4"> 4<br>
            <input type="radio" name="answer" value="5"> 5<br>
            </form>
        </div>

        <br>

        <div class="buttons" style="text-align:center;">
         <button type="button" id="submit" >Submit HIT!</button>
        </div>

    </div>


</body>
</html>